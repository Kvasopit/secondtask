<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Заметки</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div id="app">

    <!-- Кнопка добавления карточки (блокируется, если isColumn1Blocked === true) -->
    <button @click="addCard" :disabled="isColumn1Blocked">Добавить карточку</button>
    <p v-if="isColumn1Blocked" class="warning">
        Первый столбец заблокирован, так как во втором столбце 5 карточек
        и есть карточка в первом столбце с прогрессом > 50%.
    </p>

    <div class="columns">
        <!-- 1-й столбец -->
        <div class="column">
            <h2>Новые</h2>
            <div v-for="(card, index) in columns[0]" :key="index" class="card">
                <h3>{{ card.title }}</h3>
                <ul>
                    <li v-for="(task, tIndex) in card.tasks" :key="tIndex">
                        <input type="checkbox" v-model="task.done" @change="updateProgress(card)">
                        {{ task.text }}
                    </li>
                </ul>
                <!-- Кнопка добавления пункта (блокируется, если isColumn1Blocked === true) -->
                <button @click="addTask(card)" :disabled="isColumn1Blocked">Добавить пункт</button>
            </div>
        </div>

        <!-- 2-й столбец -->
        <div class="column">
            <h2>В процессе</h2>
            <div v-for="(card, index) in columns[1]" :key="index" class="card">
                <h3>{{ card.title }}</h3>
                <ul>
                    <li v-for="(task, tIndex) in card.tasks" :key="tIndex">
                        <input type="checkbox" v-model="task.done" @change="updateProgress(card)">
                        {{ task.text }}
                    </li>
                </ul>
            </div>
        </div>

        <!-- 3-й столбец -->
        <div class="column">
            <h2>Готово</h2>
            <div v-for="(card, index) in columns[2]" :key="index" class="card">
                <h3>{{ card.title }}</h3>
                <p>Завершено: {{ card.completedAt }}</p>
                <ul>
                    <li v-for="(task, tIndex) in card.tasks" :key="tIndex">
                        {{ task.text }}
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Подключаем Vue и наш скрипт -->
<script src="js/vue.min.js"></script>
<script src="js/main.js"></script>
</body>
</html>
